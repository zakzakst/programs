(()=>{"use strict";var t=function(){function t(){this.textEl=document.querySelector(".sw-text"),this.startEl=document.querySelector(".sw-control__start"),this.stopEl=document.querySelector(".sw-control__stop"),this.resetEl=document.querySelector(".sw-control__reset"),this.isRunning=!1,this.startTime=null,this.timeDiff=null,this.timer=null,this.timerInterval=40}return t.prototype.init=function(){console.log("ストップウォッチ初期化"),this.changeView("init"),this.clickStartHandler(),this.clickStopHandler(),this.clickResetHandler()},t.prototype.start=function(){var t=this,e=new Date;this.startTime=e.getTime(),this.timer=setInterval((function(){var e=t.getPastTime().diffText;t.showTimerText(e)}),this.timerInterval),this.isRunning=!0,this.changeView("run")},t.prototype.stop=function(){this.isRunning&&(clearTimeout(this.timer),this.timeDiff=this.getPastTime().diff,this.isRunning=!1,this.changeView("stop"))},t.prototype.reset=function(){this.startTime=null,this.timeDiff=null,this.timer=null,this.changeView("init")},t.prototype.getPastTime=function(){var t=new Date,e=this.timeDiff?this.timeDiff:0,i=t.getTime()-this.startTime+e,s=Math.floor(i/6e4),n=Math.floor(i%6e4/1e3),r=i%1e3;return{diff:i,diffText:("0"+s).slice(-2)+":"+("0"+n).slice(-2)+":"+("0"+r).slice(-3).slice(0,2)}},t.prototype.showTimerText=function(t){this.textEl.textContent=t},t.prototype.changeView=function(t){switch(t){case"init":this.showTimerText("00:00:00"),this.startEl.classList.remove("is-hidden"),this.stopEl.classList.add("is-hidden"),this.resetEl.classList.add("is-hidden");break;case"run":this.stopEl.classList.remove("is-hidden"),this.startEl.classList.add("is-hidden"),this.resetEl.classList.add("is-hidden");break;case"stop":this.startEl.classList.remove("is-hidden"),this.resetEl.classList.remove("is-hidden"),this.stopEl.classList.add("is-hidden")}},t.prototype.clickStartHandler=function(){var t=this;this.startEl.addEventListener("click",(function(){return t.start()}))},t.prototype.clickStopHandler=function(){var t=this;this.stopEl.addEventListener("click",(function(){return t.stop()}))},t.prototype.clickResetHandler=function(){var t=this;this.resetEl.addEventListener("click",(function(){return t.reset()}))},t}(),e=function(){function t(){this.textEl=document.querySelector(".timer-text"),this.formEl=document.querySelector('form[name="timerForm"]'),this.inputSetEl=document.querySelector(".timer-input__container"),this.inputEl=document.querySelector(".timer-input"),this.startEl=document.querySelector(".timer-control__start"),this.stopEl=document.querySelector(".timer-control__stop"),this.resetEl=document.querySelector(".timer-control__reset"),this.isRunning=!1,this.startTime=null,this.remainTime=null,this.timer=null,this.timerInterval=40}return t.prototype.init=function(){console.log("タイマー初期化"),this.changeView("init"),this.clickStartHandler(),this.clickStopHandler(),this.clickResetHandler()},t.prototype.start=function(){var t=this,e=new Date;this.startTime=e.getTime(),this.timer=setInterval((function(){if(t.getRemainTime().remain>0){var e=t.getRemainTime().remainText;t.showTimerText(e)}else t.stop(),t.showTimerText("00:00:00"),t.clearState(),setTimeout((function(){alert("時間が経過しました")}),t.timerInterval)}),this.timerInterval),this.isRunning=!0,this.changeView("run")},t.prototype.stop=function(){this.isRunning&&(clearTimeout(this.timer),this.remainTime=this.getRemainTime().remain,this.isRunning=!1,this.changeView("stop"))},t.prototype.reset=function(){this.clearState(),this.changeView("init")},t.prototype.clearState=function(){this.startTime=null,this.remainTime=null,this.timer=null},t.prototype.getRemainTime=function(){var t=(new Date).getTime()-this.startTime,e=this.remainTime-t,i=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3),n=e%1e3;return{remain:e,remainText:("0"+i).slice(-2)+":"+("0"+s).slice(-2)+":"+("0"+n).slice(-3).slice(0,2)}},t.prototype.getInputTime=function(){var t=this.formEl.min.value||0,e=this.formEl.sec.value||0,i=this.formEl.mSec.value||0;return 6e4*parseInt(t)+1e3*parseInt(e)+parseInt(i)},t.prototype.showTimerText=function(t){this.textEl.textContent=t},t.prototype.changeView=function(t){switch(t){case"init":this.showTimerText("00:00:00"),this.startEl.classList.remove("is-hidden"),this.resetEl.classList.remove("is-hidden"),this.stopEl.classList.add("is-hidden"),this.formEl.reset();break;case"run":this.stopEl.classList.remove("is-hidden"),this.startEl.classList.add("is-hidden"),this.resetEl.classList.add("is-hidden"),this.inputSetEl.setAttribute("disabled","true");break;case"stop":this.startEl.classList.remove("is-hidden"),this.resetEl.classList.remove("is-hidden"),this.stopEl.classList.add("is-hidden"),this.inputSetEl.removeAttribute("disabled")}},t.prototype.clickStartHandler=function(){var t=this;this.startEl.addEventListener("click",(function(){t.getInputTime()?(t.remainTime||(t.remainTime=t.getInputTime()),t.start()):alert("タイマーの時間を設定してください")}))},t.prototype.clickStopHandler=function(){var t=this;this.stopEl.addEventListener("click",(function(){return t.stop()}))},t.prototype.clickResetHandler=function(){var t=this;this.resetEl.addEventListener("click",(function(){return t.reset()}))},t}();(new(function(){function i(){this.tabEl=document.querySelector(".tabs__container"),this.contentsEl=document.querySelector(".contents"),this.contentsList=[{id:"sw",text:"ストップウォッチ"},{id:"timer",text:"タイマー"}],this.currentContent=0,this.StopWatch=new t,this.Timer=new e}return i.prototype.init=function(){this.tabInitView(),this.contentsInitView(),this.onClickTabHandler(),this.StopWatch.init(),this.Timer.init()},i.prototype.tabInitView=function(){for(var t="",e=0;e<this.contentsList.length;e++)t+="\n        <li><a>"+this.contentsList[e].text+"</a></li>\n      ";this.tabEl.innerHTML=t,this.changeTab(this.currentContent)},i.prototype.changeTab=function(t){Array.from(this.tabEl.children).forEach((function(t){t.classList.remove("is-active")})),this.tabEl.children[t].classList.add("is-active")},i.prototype.contentsInitView=function(){this.changeContents(this.currentContent)},i.prototype.changeContents=function(t){Array.from(this.contentsEl.children).forEach((function(t){t.classList.add("is-hidden")})),this.contentsEl.children[t].classList.remove("is-hidden")},i.prototype.onClickTabHandler=function(){var t=this;this.tabEl.addEventListener("click",(function(e){var i=e.target;t.StopWatch.stop(),t.Timer.stop();var s=t.tabEl.getElementsByTagName("li"),n=Array.from(s).indexOf(i.closest("li"));t.changeTab(n),t.changeContents(n)}))},i}())).init()})();